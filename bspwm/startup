#!/bin/bash

# Cleanup (if we're reloading)
if [ -n "$(tmux ls | cut -d":" -f1 | grep "bgprocs")" ]; then
  tmux kill-session -t bgprocs
fi

# Setup tmux for bg processes
tmux new -s bgprocs -d

. ~/my/dotfiles/bspwm/startup_functions

slowKill polybar

# Setup panel
tmux new -s panel -d
tmux send-keys -t panel 'MONITOR=HDMI-0 polybar default &' C-m
tmux send-keys -t panel 'MONITOR=HDMI-1 polybar default &' C-m

function launch {
  . ~/my/dotfiles/bspwm/launch_${1}
}

launch 1
launch 2
launch 3
launch 4
launch 6
