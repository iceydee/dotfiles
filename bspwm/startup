#!/bin/bash

# Cleanup (if we're reloading)
if [ -n "$(tmux ls | cut -d":" -f1 | grep "bgprocs")" ]; then
  tmux kill-session -t bgprocs
fi

# Setup tmux for bg processes
tmux new -s bgprocs -d

. ~/my/dotfiles/bspwm/startup_functions

slowKill polybar

# Setup panel
tmux new -s panel -d
tmux send-keys -t panel 'MONITOR=HDMI-0 polybar default &' C-m
tmux send-keys -t panel 'MONITOR=HDMI-1 polybar default &' C-m

# Setup desktop 1
. ~/my/dotfiles/bspwm/launch_1

# Setup desktop 2
. ~/my/dotfiles/bspwm/launch_2

# Setup desktop 3
. ~/my/dotfiles/bspwm/launch_3

# Setup desktop 4
. ~/my/dotfiles/bspwm/launch_4
